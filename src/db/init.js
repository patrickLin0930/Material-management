// src/db/init.js
// db.close(); // å…ˆé—œé–‰è³‡æ–™åº«
// indexedDB.deleteDatabase('CargoFlowDB'); // ç„¶å¾Œåˆªé™¤è³‡æ–™åº«

import { db } from './database'

export async function initializeStyles() {
  await db.styles.clear()
  console.log('ğŸ”„ æ¸…ç©ºèˆŠè³‡æ–™ï¼Œé–‹å§‹åˆå§‹åŒ–æ¬¾å¼è³‡æ–™')

  const baseStyles = [
    { name: '8885', colors: ['ç²‰è‰²', 'è—è‰²', 'ç´«è‰²', 'ç¶ è‰²'] }, // 980
    { name: 'A11', colors: ['é»‘è‰²', 'è†šè‰²', 'æ¡ƒè‰²'] }, // 600
    { name: '934', colors: ['ç°è‰²', 'è†šè‰²'] }, // 79
    { name: '668', colors: ['é»‘è‰²', 'ç°è‰²'] }, // 300
    { name: '1788', colors: ['é»‘è‰²', 'è†šè‰²'] }, // 780
    { name: '1593', colors: ['é»‘è‰²', 'ç²‰è‰²'] }, // 870

    { name: '637', colors: ['ç°è‰²', 'æ·ºç´«è‰²', 'ç°è—è‰²', 'é»‘è‰²'] }, // 600
    { name: '2605', colors: ['é»‘è‰²', 'æ·±æè‰²', 'æ·ºæè‰²', 'æš—ç²‰è‰²', 'ç™½è‰²'] }, // 1200
    { name: '623', colors: ['é»‘è‰²', 'æ£—ç´…è‰²', 'è±†æ²™è‰²', 'è†šè‰²'] }, // 300
    { name: 'A1', colors: ['ç´…ç°è‰²', 'è±†æ²™è‰²', 'ç°è—è‰²', 'é»‘è‰²'] }, // 300

    { name: '286', colors: ['è¦ç²‰è‰²', 'è±†æ²™è‰²', 'ç´«è‰²', 'æè‰²', 'é»‘è‰²'] }, // 300
    { name: 'é–¨å¯†', colors: ['ç°ç´«è‰²', 'ç£šç´…è‰²', 'è†šè‰²', 'é’æª¸è‰²'] }, // 290
    { name: '6686', colors: ['è“ç²‰è‰²', 'æš–è†šè‰²', 'è—»ç¶ è‰²', 'èŒ¶ç¶ è‰²', 'é»‘è‰²', 'ç´…è‰²'] }, // 870
    { name: '692', colors: ['æ·ºç¶ è‰²', 'æ·ºè—è‰²', 'è†šè‰²', 'é»‘è‰²'] }, // 290

    { name: 'æœå‡1.0', colors: ['è—è‰²', 'ç²‰è‰²', 'å’–è‰²', 'é»‘è‰²'] }, // 390
    { name: '8880', colors: ['æ·ºç¶ è‰²', 'ç²‰è†šè‰²', 'è±†ç´«è‰²', 'é»‘è‰²'] }, // 780
    { name: '8805', colors: ['é»‘è‰²', 'è—•ç´«è‰²', 'ç“·è—è‰²', 'æš–è†šè‰²', 'å¤§ç´…è‰²'] }, // 1170
    { name: '6782', colors: ['è±†ç²‰è‰²', 'è—•ç´«è‰²', 'è—»ç¶ è‰²', 'é»‘è‰²'] }, // 1170
    
    { name: '6607', colors: ['æ·ºç¶ è‰²', 'è†šè‰²', 'ç£šç´…è‰²', 'ç¶ è‰²', 'é»‘è‰²'] }, // 780
    { name: '3912', colors: ['æ·ºç´«è‰²', 'è†šè‰²', 'é¦™æª³è‰²', 'é»‘è‰²'] }, // 780
    { name: '875', colors: ['å¥¶ç°è‰²', 'è—•ç´«è‰²', 'èŒ¶ç¶ è‰²', 'è—•ç²‰è‰²', 'é»‘è‰²'] }, // 1170
    { name: '520', colors: ['æ·ºç´«è‰²', 'æ·ºè†šè‰²', 'è‰ç¶ è‰²', 'é»‘è‰²'] } // 1170
  ]

  const priceMap = {
    '8885': 980,
    'A11': 600,
    '934': 79,
    '668': 300,
    '1788': 780,
    '1593': 870,
    '637': 600,
    '2605': 1200,
    '623': 300,
    'A1': 300,
    '286': 300,
    'é–¨å¯†': 290,
    '6686': 870,
    '692': 290,
    'æœå‡1.0': 390,
    '8880': 780,
    '8805': 1170,
    '6782': 1170,
    '6607': 780,
    '3912': 780,
    '875': 1170,
    '520': 1170
  }

  const sizes = ['34 (S)', '36 (M)', '38 (L)', '40 (XL)', '42 (2XL)', '44 (3XL)', '46 (4XL)']
  const expanded = []

  baseStyles.forEach(({ name, colors }) => {
    sizes.forEach(size => {
      colors.forEach(color => {
        expanded.push({
          name,
          size,
          color,
          price: priceMap[name] || 0
        })
      })
    })
  })

  await db.styles.bulkAdd(expanded)
  console.log('âœ… åˆå§‹åŒ–æ¬¾å¼è³‡æ–™å®Œæˆ')
}
